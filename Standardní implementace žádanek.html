
        <!DOCTYPE html>
        <html lang="cs">
        <head>
        <meta charset="UTF-8">
        <title>Standardní implementace žádanek.pdf</title>
        </head>
        <body>
        <pre>
        Standardní implementace žádanek

čtvrtek 7.března2024 — 9:54

Potřebné části implementace žádanek
1. Specifikace žádanek - ano/ne
a. Doporučení je všude jít se specifikací a nikde neimplementovat bez specifikací. Proč?
i. Bez specifikace nejsou kontroly.
ii.. Pokud v budoucnu bude na zakázce např. potřeba rozběhnout recepto-žádanky, bez specifikací to nepůjde.
b. Ve specifikaci žádanek nedávat kontrolu na "Zákaz skupin zboží". Vždy řešit filtrem skupin.
2i.
c. Ve specifikaci se dost často používá kontrola na minimálně cenu s daní na řádku. Nyní se kontrola projevuje až po přidání řádku na žádanku tím, že se řádek ihned podbarví, ale neukazuje
se tooltip s popisem chyby. Doporučuji uživatele školit, aby když uživatel vidí, že má řádek divné podbarvení, pokusil se doklad uložit a tam už mu to chybu ukáže.

d. Definice rolí ve specifikaci bude buďt
i. Obecná - na zakázce neexistuje omezení a všichni mohou všechny specifikace, pak dávat roli LgZaklad.
ii.. Zakázková - na zakázce existují omezení, kdo může používat kterou specifikaci žádanek a tady se zakázkovým rolím nevyhnete.

2. Rozpady žádanek - ano/ne
a. Tady opravdu záleží na potřebách dané zakázky. Pokud půjde vždy celá žádanka na jeden CS, tak mi stačí zadat cílové umístění do Specifikace žádanky a rozpad nepotřebuji. Pokud ale
musím žádanku rozpadnout, rozpad definovat potřebuji.
b. Rozpady se zpracovávají dle položky pořadí. Specifičtější musí mít menší číslo a obecnější větší.
Defaultní rozpad se použije, pokud to žádný rozpad s nižším číslem nezachytí.
d. Aby vůbec k rozpadu došlo, je potřeb nastavit na útvaru nemocnice akci pro stav dokladu OŽáds, která má odkazovat na nú(LgProcessingOZad) s modulem
RemoteTaskLgDetermineTargetProcessingTaskModule.

o

3. Nákladová střediska a externí pracoviště (Cíle mapování resp. CVVM) - situace Ožád
a. Pro odesílání žádanek se definuje akce Žádanka, která má být na Uzlu nemocnice a externí pracoviště musí být útvar, který existuje v FE (Nemusí mít logistickou konfiguraci).
Mapování nákladových středisek a externích prac 0x

Lekýs

FONS - FONS:
Lekýs - Lekis
NemUNB - Nemocnice ÚNB

LekisSC - Lekis CS

ně — |LekisSC
Lekis CS

danky do externího CS se definuje v Nastavení komunikací s externími systémy.

b. Parametry:
i. Akce - OŽád - Žádanka

ii. Cílový systém - instance externího systému (z jeho konfigurace se např. bere jakým kódem bude zboží v žádance identifikováno).
iii.. Vzdálená úloha - která nů provede samotné odeslání
iv. Cílové mapování - vazba na CWM
c. NÚ pro odesílání logistických žádanek:
i.. Spouštěný modul: RemoteTaskLgSendinternalOrderToExternalSystemModule - existuje pouze jeden a ne jako ve schvalování, kde byl pro každý externí systém jiný.

Obecná konfigurace
Typ komunikace | Odeslání žádanky do Lekisu V3 ++ ] Testovací režim |/
ID Dokladu | | Typdokladu | |Žádanka
-Konfigurace externího systému

Uživatel [ | Hesio

Adresa webové s!

Konfigurace záměny nomenklatur
Nomenkiatura |

Typ pozitivního listu | ++ | Pozitivní list

Konfigurace odesílání chybových zpráv

Stapro - Úloha pro odeslání chyb

Zákazník - Úloha pro odeslání chyb m

ii.. Typ komunikace - zde dle zakázky. Pokud v typech není komunikace pro daný typ externího systému, tak odesílat logistické žádanky neumíme.
i. Typ dokladu - Žádanka

iv. Konfigurace externího systému - zde zadáváme url a příp. uživatele a heslo. Nezadává se to do konfigurace rozpadů jako ve schvalovacích žádankách.
v. Konfigurace záměny nomenklatur - zatím logika není dotažená, tak nepoužívat.

vi. Úlohu pro odesílání chyb vždy nastavit i na správce IT dané zakázky.

5. Sekvence žádanek
a. Sekvence číslování žádanek - pozor na externí sw a jejich specifika (textové prefixy, sufixy, lomítka...)

6. FE typu list žádanek
a. Doporučuji na zakázkách školit pouze tento list pro žádanky.
b. Pozorna speciální logiku KS vždy Logický pohled:
i. Jedná se o kompletní pohled na celou žádanku a ne na její části.
ii. V určitých sloupcích tedy vidím kalkulované hodnoty:
1) Nejnižší stav části žádanky.
2) Není vidět cílové pracoviště, protože může být u každé
3) Dle mého by bylo dobré etalonově skrýt sloupce Účetní pracoviště a Nákladové středisko.
c. Učit uživatele používat tlačítko Vykrytí a ne Svázané doklady - toto tlačítko bude, v některé z dalších iterací, defaultně skryto a bude možno jej nechat zobrazit pouze v konf. LE.

7. Schvalovací procesy
a. Vždy používat pouze etalonové role. Máme LgSchCenL1-6, LgSchLim1-6 a LgSchVAL1-9. Celkem tedy 21 rolí.
i. Pokud použijeme pouze etalonové role, je proces přenositelný mezi zakázkami a můžeme si ho přenést i do Stapra na jakýkoliv release a ladit.
1) Ve fexu se upravují pouze hodnoty v souboru EntityTypeBC.xml a to elementy:

WEFE Staré na nové - stránka 1


a) <Code>TrinecLgProcess SZMS</Code> - tam se musí změnit prefix kódu toho procesu, aby odpovídal dané zakázce
b) <EntityTypeAreald>8f5b1515-1ad6-4f97-95e5-1cb949cccea5</EntityTypeAreald> - tam se musí dát guid logistické arey dané zakázky. EntityBuilder -> filtr Area -> kód

začínající Logistics
ty Oblast Datový typ: „-
O
o logstcirestůmoUNB — — — logstcAest8moUk8 - logstke - e F4 0

LogistrsáresátérnoUN8:

LogistcsAretBrmoUN8:
0 Paromet

S Area - Aren:

Logistcsáres M

ii.. Pokud se nějaký proces opakuje na více zakázkách, kresleme etalonové procesy.

ili.. Pokud máte složitý proces, nakreslete si ho u nás na některém z releasů a až si ho komplet odladíte, přeneste ho na zakázku.

iv.. Pokud zákazník požaduje změnu stávajícího procesu a musím šáhnout na šipečky nebo výkonové části a ne pouze na nějaké popisky, vždy vytvořit nový jako kopie, ten upravit dle
nových požadavků, otestovat si ho a nastavit v příslušné specifikaci. Pokud se pustíte cestou editace stávajícího, žádanky, které jsou ve schvalování "zabloudí" a nepom ůže nic jiného
než, datový zásah programátora.

b. Pro odesílání emailů ze schvalovacích procesů používat vždy nú s modulem RemoteTaskSendEmailMessageModule.
i. Úloha se definuje v entity builderu na národní entitě žádanky (LgCzInternalOrderRecordHead nebo SK) v konf. parametru "Parametr pro schvalování", položka Naplánovaná úloha
pro odesílání.

ii.. Podrobný návod jsem posílal emailem bokem.

c. Schvalovací procesy nemají větev Stornování žádanky, která byla ve starých webových žádankách.

8. Limity
a. Nezapomenout, že se jedná o žádankové limity a ne výdejové.
b. Vždy pouze kumulativní příp. jim nastavit "Nedopočítávat", pokud by nechtěli kumulativní.
i. Kompletní testování limitů proběhlo pouze na logice kumulativních a ne na intervalových.
c. Kde se nastavuje konfigurace limitů
i. Entita Budget, parametr "Chování limitů".
1) Typ skupiny - pro skupiny jakých typů se budou konfigurovat a počítat limity.
a) Pokud není uvedeno, bere se typ skupiny CommodityType. Přesto doporučuji nastavit VŽDY.
2) Naplánovaná úloha pro změnu limitů: nů s modulem RemoteTaskLgBudgetAdjustmentModule.
3) Zaškrtnout "Limit pro logistické žádanky".
d. Sekvence - Je potřeba vytvořit sekvenci pro číslování fronty limitů. Existuje etalonová vzorové sekvence
rootu.
e. NÚ pro generování kumulativních limitů - BudgetCumulGenerate.
i. Je ve špatné frontě, tak ji přehodit do Logistické.
ii.. Pokud není, je potřeba nastavit parametr útvaru na útvar nemocnice.
f. NÚ pro dopočet kumulativních limitů - BudgetCumulCorrect. Je ve špatné frontě, tak ji přehodit do Logistické.

íslování záznamů fronty pro ovlivněn

mitů", tak tento vzor použít a vytvořit na

9. Tasky
a. Určitě by bylo fajn implementovat task na komunikační log, který bude sledovat funkční odesílání žádanek do externích systémů - LgCommunicationLogListEntityListErrorTask.
i.. Upozorním, že akce odeslání logistické žádanky se jmenuje Odeslání žádanky. U schvalovacích to byla akce hned na začátku seznamu Odeslání objednávky.
b. Nastavit task na žádanky ke schválení - LglnternalOrderInApprovingProcessTask.

10. Zakázkové priority žádanek
a. Pokud chce zakázka vlastní názvy priorit, lze to provést pomocí záznamů v LogisticDeployConfiguration, kde se do položky KeySetting dává FE kód priority a do položky StringData01 se
dává požadovaný název priority.
b. Je vždy potřeba si uvědomit, že je v FE i pořadí priorit, které měnit nelze 0-Normal, 1-Statim, 2-Vital a podle toho se i žádanky řadí.
i. Níže příklad z KZ, kde je jejich pořadí priorit Norma, Hodie, Statim a jak to správně upravit. Ten řádek pro Normal, nebude použit, protože se název priority nemění.

INSERT INTO [LogisticDeployConfigurations] ([LogisticDeployConfigurationsid],[LastUpdated],[UpdateUser],[State],[Group],[Sect ion] [KeySetting],[StringData01])
VALUES (NEWID(), GETDATE(), 23, 0, 'Logistics', InternalOrderPriorityLabel', 'Normal', 'Normal')

INSERT INTO [LogisticDeployConfigurations] ([LogisticDeployConfigurationsid] [LastUpdated],[UpdateUser],[State],[Group],[Sect ion] [KeySetting],[StringData01])
VALUES (NEWID(), GETDATE|(), 23, 0, 'Logistics', InternalOrderPriorityLabel', 'Statim', 'Hodie")

INSERT INTO [LogisticDeployConfigurations] ([LogisticDeployConfigurationsid] [LastUpdated],[UpdateUser],[State],[Group],[Sect ion] [KeySetting],[StringData01])
VALUES (NEWID(), GETDATE|(), 23, 0, 'Logistics', 'InternalOrderPriorityLabel', 'Vital', 'Statim')

WEFE Staré na nové - stránka 2



        </pre>
        </body>
        </html>
        