
        <!DOCTYPE html>
        <html lang="cs">
        <head>
        <meta charset="UTF-8">
        <title>Vratka.pdf</title>
        </head>
        <body>
        <pre>
        Vratka

úterý 19. března 2024 — 16:27

1. Nákladová střediska a externí pracoviště (Cíle mapování resp. CVVM) - situace VPřesE

Mapování nákladových středisek a externích pracovišť

CHLB->FaRMIS

FONS - FONS —

FaRMIS - FaRMIS
Uzel CHLB - Chirurgie lůžka 8

Externí kód uziu

vé nákiadové středisko — 123456 - FaRMIS Test

nákladové středisko | 708 - Chirurgie B

Externí pracoviště

Kód externího pracoviště 0
Název externího praco: 0
Situace VPřesE v

, Do dokladu VPřesE se nabízejí pouze ty konfigurace CVVM, které jsou pro situaci VPřesE a Uzel mají nastaven pro pracoviště tvořící vratku.

Na KS v FE může docházet i k verifikacím dokladů OVyk a vzniká tedy doklad StornoOVyk, ale ten není zatím nijak komunikován zpět na CS (interní ano externí).
.. Popisuji sice níže význam jednotlivých položek, ale jejich plnění do komunikačního XML je značně chaotické a pro každý systém trochu jiné (někdy i zmatené).

. Význam položek

i. Uzel - nastavit útvar, který vratku provádí

2oyoep

ii.. Externí kód uzlu - nevyužívá se

iii.. Cílové nákladové středisko
1) Nastavit NS, pro které je vratka určena resp. NS externího centrálního skladu.
2) Vkomunikace element - CostCentreClinicalRepository - povinný
3) Neumíme aliasy

iv. Zdrojové nákladové středisko
1) Nastavit NS pracoviště, které vratku vytváří
2) Vkomunikaci element - CostCentreCentralRepository - nepovinný

v. Externí pracoviště
1) Nevyužíváme a nemusíme vyplňovat.

vi. Kód externího pracoviště
1) Vkomunikace element CentralRepositoryCode - povinný
2) Není potřeba mít v FE vytvořen útvar se stejným kódem, ale je potřeba sem do konfigurace zapsat hodnotu externího centrálního skladu, kterou nám daný externí
centrální sklad posílá ve vykrytí resp. máme vyplněnu u situace PPřesE také v Kódu externího pracoviště.

vii.. Check-boxy - ponechány pouze ty, které pro situaci VPřesE používají
1) Používat FMD - Používá se pro doklady VPřesE, kdy se říká, že cílové pracoviště bude pracovat s FMD, tak doklad VPřesE s ním pracovat nemusí.
2) Odesílat LEK13 - Používá se pro doklady VPřesE a říká, zda se při uzavření dokladu má odesílat informace o LEK13.
3) Kontrolovat nezařazené skupiny zboží - Používá se pro doklady PPřesE, OVyk i VPřesE, kde určuje, zda se mají kontrolovat nezařazené skupiny.

2. Odesílání vratek do externích CS
a. Jaká nú se použije pro odesílání vratky do externího CS se definuje v Nastavení komunikací s externími systémy.
b. Parametry:
i. Akce - VPřesE - VPřesE
Cílový systém - instance externího systému (z jeho konfigurace se např. bere jakým identifikátorem bude skladová karta identifikována).
Vzdálená úloha - která nú provede samotné odeslání
iv.. Cílové mapování - vazba na CWM
c. Pokud se posílají všechny vratky do jednoho externího systému, nemusí se tato konfigurace definovat pro každé CVVM, ale stačí v této konfiguraci CVWYM nevyplňovat. Stejně se to
použije i u situace "slepé" vratky.

3. Slepé VPřesE
a. Pokud externí systém neumí přijímat vratky (Lekis, Mediox, Apotheke...), tak se použije tato logika.
b. Vytvoříme nú s těmito parametry:
i. Modul - RemoteTaskLgTransferToExternalRepositoryEmpty
ii.. Úloha kód - LgExternalTransferClose
iii.. Úloha název - Uzavření VPřesE dokladů bez odeslání
c. Danou úlohu nastavíme do konfigurace komunikací s externími systémy

Editace záznamu

Akce [veresE - VPřesE -

Vzdálená úloha: | LgExternalTransferClose - Uzavření VPřesE dokladů

Chové mapování [

4. Tasky
a. Určitě by bylo fajn implementovat task na komunikační log, který bude sledovat, zda vratky končící chybou - LECommunicationLogListEntityListErrorTask.

WFE Staré na nové - stránka 1



        </pre>
        </body>
        </html>
        